<html>
<head>
	<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
	<script type='text/javascript' src='http://documentcloud.github.com/underscore/underscore-min.js'></script>
	<script type="text/javascript">
		$(function() {
			$('button.login').click(function(e) {
				window.open('https://instagram.com/oauth/authorize/?client_id=3e380aed579d4751a85b6157a298da6e&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fhtml%2Fopened.html&response_type=token');
			});
		});

		function loggedIn(accessToken) {
			$('span.token').text(accessToken);


			$.ajax({
		        type: "GET",
		        dataType: "jsonp",
		        cache: false,
		        url: "https://api.instagram.com/v1/users/self/media/recent/?access_token="+accessToken,
		        success: function(data) {

		        	console.dir(data);

		        	var images = _(data.data).map(function(value) {
		        		return '<img src=\''+value.images.standard_resolution.url+'\'></img>';
		        	});

		        	$('div.results')[0].innerHTML = images.join('');



		          //   for (var i = 0; i < 6; i++) {
				        // $(".instagram").append("<div class='instagram-placeholder'>
				        // <a target='_blank' href='" + data.data[i].link +"'><img class='instagram-image' src='" + data.data[i].images.thumbnail.url +"' /></a></div>");   
	           //      }       
	        	}
    		});

		}
	</script>
</head>
<body>
	<div>
		Access Token: <span class='token'></span>
	</div>
	<div class='results'>
	</div>
	<button class='login'>Login</button>
</body>
</html>
